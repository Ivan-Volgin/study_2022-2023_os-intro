---
## Front matter
title: "Лабораторная работа №13"
subtitle: "Дисциплина - операционные системы"
author: "Волгин Иван Алексеевич"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Приобрести простейшие навыки разработки, анализа, тестирования и отладки приложений в ОС типа UNIX/Linux на примере создания на языке программирования С калькулятора с простейшими функциями.

# Задание

1. В домашнем каталоге создайте подкаталог ~/work/os/lab_prog.
2. Создайте в нём файлы: calculate.h, calculate.c, main.c.
Это будет примитивнейший калькулятор, способный складывать, вычитать, умножать и делить, возводить число в степень, брать квадратный корень, вычислять sin, cos, tan.
При запуске он будет запрашивать первое число, операцию, второе число. После этого программа выведет результат и остановится.
3. Выполните компиляцию программы посредством gcc:
4. При необходимости исправьте синтаксические ошибки.
5. Создайте Makefile.
6. С помощью gdb выполните отладку программы calcul (перед использованием gdb исправьте Makefile):
7. С помощью утилиты splint попробуйте проанализировать коды файлов calculate.c
и main.c.

# Теоретическое введение

1. Процесс разработки программного обеспечения обычно разделяется на следующие этапы:
– планирование, включающее сбор и анализ требований к функционалу и другим характеристикам разрабатываемого приложения;
– проектирование, включающее в себя разработку базовых алгоритмов и спецификаций, определение языка программирования;
– непосредственная разработка приложения:
– кодирование — по сути создание исходного текста программы (возможно в нескольких вариантах);
– анализ разработанного кода;
– сборка, компиляция и разработка исполняемого модуля;
– тестирование и отладка, сохранение произведённых изменений;
– документирование.
Для создания исходного текста программы разработчик может воспользоваться любым удобным для него редактором текста: vi, vim, mceditor, emacs, geany и др.
После завершения написания исходного кода программы (возможно состоящей из нескольких файлов), необходимо её скомпилировать и получить исполняемый модуль.

2. Стандартным средством для компиляции программ в ОС типа UNIX является GCC (GNU
Compiler Collection). Это набор компиляторов для разного рода языков программирова-
ния (С, C++, Java, Фортран и др.). Работа с GCC производится при помощи одноимённой
управляющей программы gcc, которая интерпретирует аргументы командной строки,
определяет и осуществляет запуск нужного компилятора для входного файла.

Некоторые опции компиляции в gcc
Опция | Описание
-c | компиляция без компоновки — создаются объектные файлы file.o
-o | file-name задать имя file-name создаваемому файлу
-g | поместить в файл (объектный или исполняемый) отладочную информацию для отладчика gdb
-MM | вывести зависимости от заголовочных файлов C и/или C++ программ в формате, подходящем для утилиты make; при этом объектные или исполняемые файлы не будет созданы
-Wall | вывод на экран сообщений об ошибках, возникших во время компиляции

3. Во время работы над кодом программы программист неизбежно сталкивается с появлением ошибок в ней. Использование отладчика для поиска и устранения ошибок в программе существенно облегчает жизнь программиста. В комплект программ GNU для ОС типа UNIX входит отладчик GDB (GNU Debugger)

Некоторые команды gdb
Команда | Описание действия
backtrace | вывод на экран пути к текущей точке останова (по сути вывод названий всех функций)
break | установить точку останова (в качестве параметра может быть указан номер строки или название функции)
clear | удалить все точки останова в функции
continue | продолжить выполнение программы
delete | удалить точку останова
display | добавить выражение в список выражений, значения которых отображаются при достижении точки останова программы
finish | выполнить программу до момента выхода из функции
info breakpoints | вывести на экран список используемых точек останова
info watchpoints | вывести на экран список используемых контрольных выражений
list | вывести на экран исходный код (в качестве параметра может быть указано название файла и через двоеточие номера начальной и конечной строк)
next | выполнить программу пошагово, но без выполнения вызываемых в программе функций
print | вывести значение указываемого в качестве параметра выражения
run | запуск программы на выполнение
set | установить новое значение переменной
step | пошаговое выполнение программы
watch | установить контрольное выражение, при изменении значения которого программа будет остановлена

# Выполнение лабораторной работы

Сперва нужно было создать нужный подкаталог ~/work/os/lab_prog (рис. @fig:001).

![Создание подкаталога](image/1.png){#fig:001 width=70%}

Затем создать в нем файлы calculate.h, calculate.c, main.c (рис. @fig:002) и ввести код в эти файлы: calculate.с (рис. @fig:003), calculate.р (рис. @fig:004), main.c (рис. @fig:005)

![Создание фалов](image/2.png){#fig:002 width=70%}

![Код calculate.с](image/3.png){#fig:003 width=70%}

![Код calculate.h](image/4.png){#fig:004 width=70%}

![Код main.с](image/5.png){#fig:005 width=70%}

Далее нужно было выполнить компиляцию программы посредством gcc (рис. @fig:006).

![Компиляция программы](image/6.png){#fig:006 width=70%}

Затем нужно было проверить код на синтаксические ошибки, я их не нашел. После этого создать Makefile (рис. @fig:007) и написать там следующий код (рис. @fig:008).

![Создание Makefile](image/7.png){#fig:007 width=70%}

![Код Makefile](image/8.png){#fig:008 width=70%}

Далее я запустил gdb, загрузив в него программ отладки (рис. @fig:009) и затем запустил саму программу уже внутри отладчика (рис. @fig:010).

![Запускаем gdb](image/9.png){#fig:009 width=70%}

![Запускаем программу внутри отладчика](image/10.png){#fig:010 width=70%}

После этого я пытался выполнить следующие задания и у меня никак не получалось и я не мог найти в чем проблема, поэтому я перешел к последнему пункту, где с помощью утилиты splint нужно было проанализировать коды файлов calculate.c (рис. @fig:011) и main.c (рис. @fig:012).

![Анализ кода calculate.c](image/11.png){#fig:011 width=70%}

![Анализ кода main.c](image/12.png){#fig:012 width=70%}

# Выводы

В ходе выполнения данной лабораторной работы я приобрел простейшие навыки разработки, анализа, тестирования и отладки приложений в ОС типа UNIX/Linux на примере создания на языке программирования С калькулятора с простейшими функциями.

